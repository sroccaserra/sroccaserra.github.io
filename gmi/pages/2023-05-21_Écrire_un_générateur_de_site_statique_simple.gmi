-- date: 2023-05-21
# Ã‰crire un gÃ©nÃ©rateur de site statique simple

J'en avais assez de publier mes textes persos sur dev.to, oÃ¹ je restais parce-que je ne savais pas vraiment oÃ¹ publier sans trop m'embÃªter. Comme j'ai rÃ©cemment Ã©crit un article sur l'utilitÃ© de savoir construire ses outils, je me suis dit que je n'avais qu'Ã  me construire mon propre gÃ©nÃ©rateur de site statique. J'ai fait Ã§a en quelques heures pour m'amuser ðŸŽ‰

RÃ©sultat :

* 28 loc de Makefile pour convertir le markdown en html et appliquer le layout commun.
* 11 loc de shell pour gÃ©nÃ©rer la table des matiÃ¨res.
* Une seule dÃ©pendance de 18 ko qui ne change plus depuis 2004 (markdown basique).
* Utilise quelques commandes qu'on a dÃ©jÃ  sur un Linux de dev (`make`, `m4`, `grep`, `cut`, `tr`, `awk`, perl 5 pour markdown).
* ZÃ©ro framework.
* ZÃ©ro tracker addictif.
* ZÃ©ro scroll infini addictif.
* ZÃ©ro recommandations addictives.
* Je suis passÃ© d'un Ã©co index de 56 sur dev.to Ã  95 environ (?)

Et Ã§a juste marche ðŸ˜®

Il me reste Ã  trouver un vrai titre Ã  ce site (le titre actuel est nul), et Ã  faire un aspect visuel correct en quelques lignes de CSS. Il y a un lien vers le code source en bas de la page.

=> https://sroccaserra.github.io/

Ce que j'ai me semble suffisant :

* Tapper `make` suffit pour mettre Ã  jour tout ce qui doit l'Ãªtre.
* Un layout commun est appliquÃ© automatiquement.
* La liste des articles est gÃ©nÃ©rÃ©e automatiquement.
* J'Ã©cris mes articles en markdown basique (pas de fioritures => le script markdown original de 18 ko suffit, c'est stable depuis 2004, pas de fancy gÃ©nÃ©rateur de 150+ Mo qui fait le cafÃ©).
* La dÃ©pendance vers markdown est facile Ã  annuler : je peux revenir Ã  du HTML pur en quelques minutes en utilisant les pages gÃ©nÃ©rÃ©es.
* Pour le code, la balise `&lt;pre>` plus quelques balises `&lt;b>` pour mettre en valeur une ou deux choses suffisent largement Ã  mes besoins, pas besoin de syntax highlighter.
* Pour visualiser mes changements j'utilise le Python installÃ© par dÃ©faut pour dÃ©marrer un serveur HTTP local (un one-liner, voir Makefile).
* J'hÃ©berge le site statique sur GitHub Pages, pour un dÃ©veloppeur Ã§a me paraÃ®t largement suffisant.

L'expÃ©rience, en plus d'Ãªtre amusante, m'a fait ressentir non pas une plus grande contrainte mais au contraire une libÃ©ration, une plus grande lÃ©gÃ¨retÃ©.  En m'appuyant sur des technologies de base que je connais dÃ©jÃ  depuis 20 ans, qui existent depuis encore plus longtemps, qui sont dÃ©jÃ  installÃ©es partout, et qui sont stables, je me libÃ¨re :

* D'avoir Ã  choisir le "meilleur" gÃ©nÃ©rateur de site statique (SSG ?) du moment.
* Du poids d'avoir Ã  mettre Ã  jour en permanence mes dÃ©pendances.
* D'avoir Ã  lire des changelogs et rÃ©parer des breaking changes tous les X ans ou Y mois.
* D'avoir Ã  installer le framework X en version Y sur un nouveau PC pour travailler sur mon site.
* D'avoir Ã  installer Node.js en version X ou Ruby en version Y ou Go en version Z sur un nouveau PC pour travailler sur mon site.
* Du risque qu'un beau matin mon gÃ©nÃ©rateur de site statique soit cassÃ© car Node.js, Ruby, ou Go, ou une dÃ©pendance d'une dÃ©pendance, ou autre a changÃ© par surprise.

## Liens

=> https://github.com/sroccaserra/sroccaserra.github.io/blob/5e17de3/Makefile Les 28 loc de Makefile
=> https://github.com/sroccaserra/sroccaserra.github.io/blob/aeb8c9b/src/toc.sh Les 11 loc de script shell
=> https://daringfireball.net/projects/markdown/ Le script markdown 1.0.1 de 2004

Les inspirations qui m'ont permis de construire ce gÃ©nÃ©rateur simplement et en
peu de temps :

=> https://fabiensanglard.net/html/index.html All you may need is HTML, Fabien Sanglard
=> https://technomancy.us/colophon Phil Hagelberg's Colophon
=> https://p.hagelb.org/Makefile.html Phil Hagelberg's Makefile
=> https://www.frugarilla.fr/ Les collÃ¨gues de Frugarilla
=> https://danluu.com/ Le site de Dan Luu
=> https://motherfuckingwebsite.com/ motherfuckingwebsite.com
=> https://chrisman.github.io/9.html chrisman.github.io/9.html
=> https://github.com/vkitchen/apostl github.com/vkitchen/apostl
