-- date: 2023-05-21
# √âcrire un g√©n√©rateur de site statique simple

J'en avais assez de publier mes textes persos sur dev.to, o√π je restais parce-que je ne savais pas vraiment o√π publier sans trop m'emb√™ter. Comme j'ai r√©cemment √©crit un article sur l'utilit√© de savoir construire ses outils, je me suis dit que je n'avais qu'√† me construire mon propre g√©n√©rateur de site statique. J'ai fait √ßa en quelques heures pour m'amuser üéâ

R√©sultat :

* 28 loc de Makefile pour convertir le markdown en html et appliquer le layout commun.
* 11 loc de shell pour g√©n√©rer la table des mati√®res.
* Une seule d√©pendance de 18 ko qui ne change plus depuis 2004 (markdown basique).
* Utilise quelques commandes qu'on a d√©j√† sur un Linux de dev (`make`, `m4`, `grep`, `cut`, `tr`, `awk`, perl 5 pour markdown).
* Z√©ro framework.
* Z√©ro tracker addictif.
* Z√©ro scroll infini addictif.
* Z√©ro recommandations addictives.
* Je suis pass√© d'un √©co index de 56 sur dev.to √† 95 environ (?)

Et √ßa juste marche üòÆ

Il me reste √† trouver un vrai titre √† ce site (le titre actuel est nul), et √† faire un aspect visuel correct en quelques lignes de CSS. Il y a un lien vers le code source en bas de la page.

=> https://sroccaserra.github.io/

Ce que j'ai me semble suffisant :

* Tapper `make` suffit pour mettre √† jour tout ce qui doit l'√™tre.
* Un layout commun est appliqu√© automatiquement.
* La liste des articles est g√©n√©r√©e automatiquement.
* J'√©cris mes articles en markdown basique (pas de fioritures => le script markdown original de 18 ko suffit, c'est stable depuis 2004, pas de fancy g√©n√©rateur de 150+ Mo qui fait le caf√©).
* La d√©pendance vers markdown est facile √† annuler : je peux revenir √† du HTML pur en quelques minutes en utilisant les pages g√©n√©r√©es.
* Pour le code, la balise `<pre>` plus quelques balises `<b>` pour mettre en valeur une ou deux choses suffisent largement √† mes besoins, pas besoin de syntax highlighter.
* Pour visualiser mes changements j'utilise le Python install√© par d√©faut pour d√©marrer un serveur HTTP local (un one-liner, voir Makefile).
* J'h√©berge le site statique sur GitHub Pages, pour un d√©veloppeur √ßa me para√Æt largement suffisant.

L'exp√©rience, en plus d'√™tre amusante, m'a fait ressentir non pas une plus grande contrainte mais au contraire une lib√©ration, une plus grande l√©g√®ret√©.  En m'appuyant sur des technologies de base que je connais d√©j√† depuis 20 ans, qui existent depuis encore plus longtemps, qui sont d√©j√† install√©es partout, et qui sont stables, je me lib√®re :

* D'avoir √† choisir le "meilleur" g√©n√©rateur de site statique (SSG ?) du moment.
* Du poids d'avoir √† mettre √† jour en permanence mes d√©pendances.
* D'avoir √† lire des changelogs et r√©parer des breaking changes tous les X ans ou Y mois.
* D'avoir √† installer le framework X en version Y sur un nouveau PC pour travailler sur mon site.
* D'avoir √† installer Node.js en version X ou Ruby en version Y ou Go en version Z sur un nouveau PC pour travailler sur mon site.
* Du risque qu'un beau matin mon g√©n√©rateur de site statique soit cass√© car Node.js, Ruby, ou Go, ou une d√©pendance d'une d√©pendance, ou autre a chang√© par surprise.

## Liens

=> https://github.com/sroccaserra/sroccaserra.github.io/blob/5e17de3/Makefile Les 28 loc de Makefile
=> https://github.com/sroccaserra/sroccaserra.github.io/blob/aeb8c9b/src/toc.sh Les 11 loc de script shell
=> https://daringfireball.net/projects/markdown/ Le script markdown 1.0.1 de 2004

Les inspirations qui m'ont permis de construire ce g√©n√©rateur simplement et en
peu de temps :

=> https://fabiensanglard.net/html/index.html All you may need is HTML, Fabien Sanglard
=> https://technomancy.us/colophon Phil Hagelberg's Colophon
=> https://p.hagelb.org/Makefile.html Phil Hagelberg's Makefile
=> https://www.frugarilla.fr/ Les coll√®gues de Frugarilla
=> https://danluu.com/ Le site de Dan Luu
=> https://motherfuckingwebsite.com/ motherfuckingwebsite.com
=> https://chrisman.github.io/9.html chrisman.github.io/9.html
=> https://github.com/vkitchen/apostl github.com/vkitchen/apostl
